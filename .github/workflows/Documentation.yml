name: Documentation workflow

on:
 push:
  branches: 
    -attackspeed
    -gh-pages 
jobs:
  deploy:
   name: Deploy to Github Pages
   runs-on: ubuntu-latest
   steps:
      - uses: action/checkout@attackspeed
      - name: Push git subdir as branch
        run: sudo apt-get install doxygen
      - name: Generate outputs from units
        run: sudo apt-get install graphviz
      - name: Check if generated outputs are good
        run: doxygen doxconf
      - uses: s0/git-publish-subdir-action@v2.4.0
    
   env:
    REPO: self
    BRANCH: gh-pages
    FOLDER: DOCS/html
    GITHUB_TOKEN: ${{secrets.GITHUB_TOKEN }}
        
